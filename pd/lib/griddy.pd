#N canvas 869 76 751 599 12;
#N canvas 64 64 493 404 faders 0;
#X obj 187 275 outlet;
#X obj 187 188 limit 8;
#X obj 187 235 pack;
#X obj 250 188 / 127;
#X obj 250 212 * 112;
#X obj 250 236 dbtorms;
#X obj 187 125 r faders;
#X obj 187 149 unpack;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 7 1 3 0;
#X restore 91 310 pd faders;
#X msg 91 334 \$1 level \$2;
#X obj 476 29 table track-state 8;
#X text 511 236 0 - empty \; 1 - idle \; 2 - cue stop \; 3 - recording \; 4 - cue rec \; 5 - playing \; 6 - cue play \;;
#X obj 476 54 table instant-map 7;
#X obj 476 78 table punch-map 7;
#X obj 476 106 loadbang;
#X obj 488 161 array set instant-map;
#X obj 476 214 array set punch-map;
#X msg 476 190 -1 -1 1 -1 3 -1 5;
#N canvas 277 139 811 537 process-state 0;
#X obj 34 421 outlet;
#X obj 104 335 r tempo;
#X obj 301 105 inlet;
#X obj 117 180 unpack f f f, f 15;
#X obj 232 225 sel 0 1 3 5;
#X obj 34 394 list prepend;
#X obj 168 375 list append;
#X msg 232 342 clear;
#X msg 250 313 play 0;
#X msg 269 282 rec;
#X msg 287 256 play 1;
#X obj 62 340 * 4;
#X obj 62 316 + 1;
#X obj 62 364 * 500;
#X text 29 22 args: vertical row \, column \, new state \; if state == 3 (rec) \, vertical row become rec time \; state == 5 (play) \, vertical row is slice \;;
#X obj 34 217 list prepend;
#X obj 34 241 route 0 1 3 5;
#X obj 100 275 / 8;
#X msg 451 154 \$3 \$2 \$1;
#X obj 451 178 route 0 1 2 3 4 5 6, f 37;
#X obj 388 325 t b f;
#X obj 388 349 num-seq 8;
#X obj 388 373 * 8;
#X obj 388 397 +, f 5;
#X obj 388 298 f;
#X msg 388 421 \$1 0;
#X obj 557 486 noteout;
#X obj 520 300 swap;
#X obj 520 349 num-seq;
#X obj 520 373 * 8;
#X obj 520 397 +, f 4;
#X obj 520 324 + 1;
#X msg 520 421 \$1 3;
#X obj 589 300 swap;
#X obj 589 349 num-seq;
#X obj 589 373 * 8;
#X obj 589 397 +, f 4;
#X obj 589 324 + 1;
#X msg 589 421 \$1 4;
#X obj 684 324 t b f;
#X obj 684 348 num-seq 8;
#X obj 684 372 * 8;
#X obj 684 396 +, f 5;
#X obj 684 297 f;
#X msg 684 420 \$1 6;
#X obj 301 135 t l l;
#X connect 1 0 13 1;
#X connect 2 0 45 0;
#X connect 3 0 15 0;
#X connect 3 1 6 0;
#X connect 3 2 4 0;
#X connect 3 2 15 1;
#X connect 4 0 7 0;
#X connect 4 1 8 0;
#X connect 4 2 9 0;
#X connect 4 3 10 0;
#X connect 5 0 0 0;
#X connect 6 0 5 1;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 9 0 6 1;
#X connect 10 0 6 1;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 5 0;
#X connect 15 0 16 0;
#X connect 16 0 5 0;
#X connect 16 1 5 0;
#X connect 16 2 12 0;
#X connect 16 3 17 0;
#X connect 17 0 5 0;
#X connect 18 0 19 0;
#X connect 19 0 24 0;
#X connect 19 3 27 0;
#X connect 19 4 33 0;
#X connect 19 5 24 0;
#X connect 19 6 43 0;
#X connect 20 0 21 0;
#X connect 20 1 23 1;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 25 0;
#X connect 24 0 20 0;
#X connect 25 0 26 0;
#X connect 27 0 31 0;
#X connect 27 1 30 1;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 30 0 32 0;
#X connect 31 0 28 0;
#X connect 32 0 26 0;
#X connect 33 0 37 0;
#X connect 33 1 36 1;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 36 0 38 0;
#X connect 37 0 34 0;
#X connect 38 0 26 0;
#X connect 39 0 40 0;
#X connect 39 1 42 1;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 42 0 44 0;
#X connect 43 0 39 0;
#X connect 44 0 26 0;
#X connect 45 0 3 0;
#X connect 45 1 18 0;
#X restore 75 266 pd process-state;
#X msg 559 382 const 0;
#X obj 559 406 s track-state;
#X obj 559 440 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 559 464 array get track-state;
#X obj 559 488 print;
#X obj 559 521 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 559 545 s punch-in;
#X floatatom 464 441 5 0 0 1 BPM - - 0;
#X msg 464 464 60000 \$1;
#X obj 464 488 /;
#X floatatom 464 512 5 0 0 1 ms - - 0;
#X obj 464 535 s tempo;
#X msg 488 137 4 5 -1 5 0 5 -1;
#X obj 31 423 output~;
#X obj 75 369 clone loop-track 8;
#X obj 464 392 loadbang;
#X msg 464 416 120;
#N canvas 32 32 480 545 light-tracking 0;
#X obj 66 24 inlet;
#X obj 66 85 * 8;
#X obj 66 109 i;
#X obj 66 133 change;
#X obj 66 48 swap, f 7;
#X obj 66 157 * 8;
#X obj 66 181 +, f 7;
#X msg 105 231 \$1 0;
#X msg 66 231 \$1 5;
#X obj 66 263 noteout;
#X obj 66 205 trail, f 6;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 4 1 6 1;
#X connect 5 0 6 0;
#X connect 6 0 10 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 10 0 8 0;
#X connect 10 1 7 0;
#X restore 174 425 pd light-tracking;
#X obj 255 309 t b f;
#X msg 255 333 5, f 2;
#X obj 255 357 tabwrite track-state;
#X msg 325 290 0 \$1 5;
#X text 310 271 autostoprec;
#X obj 20 331 adc~ 1;
#N canvas 345 68 450 300 gui 1;
#N canvas 178 223 561 484 (subpatch) 0;
#X obj 424 37 loadbang;
#X msg 424 61 vis 1;
#X obj 424 85 s pd-gui;
#X obj 79 259 r faders;
#X obj 79 283 route 0 1 2 3 4 5 6 7 8;
#X obj 25 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 50 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 75 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 100 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 125 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 150 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 175 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 200 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 240 120 vsl 19 110 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 4 2 7 0;
#X connect 4 3 8 0;
#X connect 4 4 9 0;
#X connect 4 5 10 0;
#X connect 4 6 11 0;
#X connect 4 7 12 0;
#X connect 4 8 13 0;
#X coords 0 1 100 -1 386 234 1 10 10;
#X restore 29 30 graph;
#X restore 400 43 pd gui;
#X obj 17 27 grid-in;
#X obj 18 195 pack f f f;
#X obj 85 140 set-state track-state instant-map, f 11;
#X obj 202 17 r punch-in;
#X obj 202 41 num-seq 8;
#X obj 202 111 set-state track-state punch-map, f 11;
#X obj 254 396 print params;
#X obj 202 164 pack f f f;
#X msg 202 188 \$3 \$2 \$1;
#X obj 269 86 tabread last-row;
#X obj 202 65 t f f;
#X connect 0 0 1 0;
#X connect 1 0 25 0;
#X connect 6 0 23 0;
#X connect 6 0 9 0;
#X connect 9 0 8 0;
#X connect 10 0 25 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 17 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 23 0 7 0;
#X connect 25 0 24 0;
#X connect 25 1 28 0;
#X connect 25 2 29 0;
#X connect 25 3 42 0;
#X connect 26 0 27 0;
#X connect 27 0 18 0;
#X connect 29 0 30 0;
#X connect 29 1 31 1;
#X connect 29 1 32 0;
#X connect 30 0 31 0;
#X connect 32 0 10 0;
#X connect 34 0 25 0;
#X connect 36 0 37 0;
#X connect 36 1 37 1;
#X connect 36 1 38 0;
#X connect 37 0 10 0;
#X connect 38 0 37 2;
#X connect 39 0 40 0;
#X connect 40 0 46 0;
#X connect 41 0 43 0;
#X connect 43 0 44 0;
#X connect 44 0 10 0;
#X connect 45 0 43 2;
#X connect 46 0 41 0;
#X connect 46 1 43 1;
#X connect 46 1 45 0;
